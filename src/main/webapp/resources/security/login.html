<!DOCTYPE html>
<html>
<head lang="en">
    <!-- External 5.0.0 -->


    <link rel="stylesheet" type="text/css"
          href="http://cdn.sencha.com/ext/trial/5.0.0/build/packages/ext-theme-crisp/build/resources/ext-theme-crisp-all.css">


    <script type="text/javascript" src="http://cdn.sencha.com/ext/trial/5.0.0/build/ext-all.js"></script>
    <script type="text/javascript"
            src="http://cdn.sencha.com/ext/trial/5.0.0/build/packages/ext-theme-crisp/build/ext-theme-crisp.js"></script>
<!--
    <link rel="stylesheet" type="text/css"
          href="resources/css/ext-theme-crisp-all.css"/>
    <script type="text/javascript" src="resources/js/extjs/ext-all.js"></script>
    <script type="text/javascript" src="resources/js/extjs/ext-theme-crisp.js"></script>-->

    <!--

           <link rel="stylesheet" type="text/css"
                 href="http://cdn.sencha.com/ext/trial/5.0.0/build/packages/ext-theme-neptune/build/resources/ext-theme-neptune-all.css">


           <script type="text/javascript" src="http://cdn.sencha.com/ext/trial/5.0.0/build/ext-all.js"></script>
           <script type="text/javascript"
                   src="http://cdn.sencha.com/ext/trial/5.0.0/build/packages/ext-theme-neptune/build/ext-theme-neptune.js"></script>
       -->

    <script type="text/javascript">

        Ext.onReady(function () {

            Ext.QuickTips.init();

            var login = Ext.create('Ext.FormPanel',
                    {
                        title: 'Please Login', url: 'j_spring_security_check', labelWidth: 80, frame: true, defaultType: 'textfield', width: 300, height: 150,
                        monitorValid: true, bodyStyle: 'padding:10px',
                        items: [
                            {    fieldLabel: 'User name', name: 'j_username', id: 'userName', allowBlank: false,
                                listeners: {
                                    afterrender: function (field) {
                                        field.focus();
                                    }
                                }
                            },
                            {    fieldLabel: 'Password', name: 'j_password', inputType: 'password', allowBlank: false }
                        ],
                        buttons: [
                            {    text: 'Login', formBind: true, handler: function () {
                                loginSubmit();
                            } },
                            {    text: 'Reset', formBind: true, handler: function () {
                                reset();
                            } }
                        ],
                        listeners: {
                            afterRender: function (thisForm, options) {
                                this.keyNav = Ext.create('Ext.util.KeyNav', this.el,
                                        {
                                            enter: loginSubmit,
                                            scope: this
                                        });
                            }
                        }
                    });

            function reset() {
                login.getForm().reset();
            }

            function loginSubmit() {
                login.getForm().submit(
                        {
                            method: 'POST',
                            success: function (form, action) {
                                window.location = 'home';
                            },
                            failure: function (form, action) {
                                Ext.Msg.alert('Login Failed!', 'Login Failed!');
                                reset();
                            }
                        });
            }


            Ext.create('Ext.Window', {
                closable: false,
                items: [
                    login
                ]
            }).show();


        });
    </script>

</head>
<body>
</body>
</html>

